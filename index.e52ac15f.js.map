{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-287c63767731573d.js","src/types/Actor.ts","src/FPSviewer.ts","src/Mariana.ts","src/actorEvil.ts","node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","node_modules/@parcel/runtime-js/lib/runtime-40b2bcadb44dd0ad.js","src/Map.ts","src/script.ts"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"6qpDd\\\":\\\"index.e52ac15f.js\\\",\\\"1uMkF\\\":\\\"escenario.418fe91d.jpg\\\"}\"));","\nimport { Point } from \"./Point\";\n\nexport interface IActor {\n    origin: Point;\n    position: Point;\n    speed?: number;\n    update: (delta: number) => void;\n    keyboard_event: (key: string) => void;\n    keyboard_event_down?: (key: string) => void;\n    keyboard_event_up?: (key: string) => void;\n    draw: (delta: number, ctx: CanvasRenderingContext2D) => void;\n}\n\nexport class Actor implements IActor {\n    origin!: Point;\n    position!: Point;\n    contructor(origin: Point) {\n        this.origin = origin;\n    }\n    update(delta: number) { }\n    draw(delta: number, ctx: CanvasRenderingContext2D) { }\n    keyboard_event(key: string) { }\n}\n\nexport type Size = { w: number, h: number }","import { Point } from \"./types/Point\";\nimport { Actor } from \"./types/Actor\";\n\n\nexport class FPSviewer extends Actor {\n  position: Point;\n  color: string;\n  constructor(position: Point, color: string) {\n    super();\n    this.position = position;\n    this.color = color;\n\n  }\n\n  update() { }\n  keyboard_event() { }\n  draw(delta: number, ctx: CanvasRenderingContext2D) {\n    const fps = (1 / delta).toFixed(2);\n    ctx.font = \"18px Arial\";\n    ctx.fillStyle = this.color;\n    ctx.fillText(`FPS:${fps}`, this.position.x, this.position.y);\n  }\n}","import { IActor, Actor, Size } from \"./types/Actor\";\nimport { Point } from \"./types/Point\"\n\nexport class Mariana extends Actor implements IActor {\n    origin: Point;\n    color: string;\n    speed: number;\n    saltando: boolean;\n    altura: number;\n    constructor({ initialPos, color = \"purple\", speed = 10 }: { initialPos: Point; color?: string; speed?: number; }) {\n        super();\n        this.origin = { x: initialPos.x, y: initialPos.y };\n        this.color = color;\n        this.speed = speed;\n        this.saltando = false;//estado espacio falso no pulsado\n        this.altura = 420;\n    }\n    //add funcion\n    /*initialize() {\n        let marianaSister_png = new image();\n        marianaSister_png.src = marina_spritesheet;\n        marianaSister_png.onload = () => { console.log(\"imagen cargada\") };\n    }*/\n    update(delta: number) {\n\n\n        let newPosX = this.origin.x;\n        if (newPosX < 490 && newPosX > 10) {\n            this.speed = 10;\n\n        } else { this.speed = 5 }\n        /*\n        let newPosY = this.position.y + this.speed.y;\n        this.position.y = newPosY;\n        if(newPosY < 540){\n          this.speed.y += 1.8*0.4;\n        }\n        if (newPosY >= 540) {\n          this.jumping = false;\n          newPosY = 540;\n          this.speed.y = 0;\n        }\n            \n            */\n\n        if (this.saltando) {\n            this.origin.y -= 1\n        }\n        if (this.origin.y == this.altura && this.saltando == true) {\n            for (let i = this.altura; i <= 490; i++) {\n                this.origin.y = i;\n            }\n            // this.origin.y += 1\n            this.origin.y = 490\n            this.saltando = false\n        }\n\n\n    }\n    keyboard_event_up(key: string) {//add\n        switch (key) {\n            case \" \":\n                console.log(\"saltando\");\n\n                break;\n        }\n    }\n\n    keyboard_event(key: string) {\n        switch (key) {\n            case \"ArrowRight\":\n                console.log(\"right\");\n                this.origin.x = (this.origin.x + this.speed);\n\n\n                break;\n            case \"ArrowLeft\":\n                //(this.origin.x > 0 && this.origin.x <= 500) = this.origin.x - this.speed\n                //tengo que conseguir que solo se mueva en el canvas de 0-500 eje x\n                this.origin.x = (this.origin.x - this.speed);\n                console.log(\"left\");\n                break;\n            case \"ArrowUp\":\n                // this.origin.y = (this.origin.y - this.speed) % 500;\n                console.log(\"Up\");\n                break;\n            case \"ArrowDown\":\n                console.log(\"Down\");\n                //this.origin.y = (this.origin.y + this.speed) % 500;    \n                break;\n            case \" \":\n                console.log(\"salta\");\n                this.origin.y = (this.origin.y - this.speed);\n                this.saltando = true;\n                break;\n        }\n    }\n    draw(delta: number, ctx: CanvasRenderingContext2D) {\n        let origin = this.origin;//add salto\n        ctx.fillStyle = 'purple';\n        ctx.fillRect(origin.x, origin.y, 10, 10);\n        // Controlamos la direcciÃ³n del Mariana\n        let direction = 0;\n        /* if (this.speed.x != 0 && this.speed.x < 0) {\n             direction = 180\n         }*/\n    }\n}\n","import { IActor, Actor, Size } from \"./types/Actor\";\nimport { Point } from \"./types/Point\";\nimport { Mariana } from \"./Mariana\";\nexport class actorEvil extends Actor implements IActor {\n    origin: Point;\n    color: string;\n    speed: number;\n    saltando: boolean;\n    altura: number;\n    actor: any;// definir que es\n    constructor(initialPos: Point, color: string, actor: any/*cambiar el any*/) {\n        super();\n        this.origin = { x: initialPos.x, y: initialPos.y };\n        this.color = color;\n        this.speed = 1;\n        this.actor = actor;//add  this.origin = { x: initialPos.x, y: initialPos.y };de mi actor mariana\n        this.saltando = false;\n        this.altura = 450;\n    }\n    update() {\n        this.origin.x -= this.speed\n        this.origin.y = 490\n        let actorPos = this.actor.origin;\n\n\n        let myPos = this.origin;\n        let distance = Math.sqrt(Math.pow(myPos.x - this.actor.origin.x, 2) + Math.pow(myPos.y - this.actor.origin.y, 2));\n        //console.log(distance);\n        if (distance <= 5 && this.actor.origin.y >= 490) { alert(\" Game Over \") }\n    }\n    keyboard_event() { }\n    draw(delta: number, ctx: CanvasRenderingContext2D) {\n        let origin = this.origin;//add salto\n        ctx.fillStyle = this.color;\n        ctx.fillRect(origin.x, origin.y, 10, 10);\n        // Controlamos la direcciÃ³n del Mariana\n        //let direction = 0;\n        //if (this.speed.x != 0 && this.speed.x < 0) {direction = 180}\n    }\n}","\"use strict\";\n\nvar bundleURL = {};\n\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n\n  return value;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","module.exports = require('./helpers/bundle-url').getBundleURL('6qpDd') + require('./helpers/bundle-manifest').resolve(\"1uMkF\");","import { Actor, IActor } from \"./types/Actor\";\nconst esc = require(\"../img/escenario.jpg\")\n\nexport class Map extends Actor implements IActor {\n  draw(delta: number, ctx: CanvasRenderingContext2D) {\n    const background = new Image();\n    background.src = esc;\n    ctx.drawImage(background, 0, 0, 500, 500);\n  }\n  update(delta: number): void { }\n  keyboard_event() { }\n}\n","import { Actor, IActor } from \"./types/Actor\";\nimport { Point } from \"./types/Point\";\nimport { FPSviewer } from \"./FPSviewer\";\nimport { Mariana } from \"./Mariana\";\nimport { actorEvil } from \"./actorEvil\";\nimport { Map } from \"../src/Map\";\nwindow.onload = () => {\n\n\n    var canvas = document.getElementById(\"canvas\") as HTMLCanvasElement;\n    var ctx = canvas.getContext('2d') as CanvasRenderingContext2D;\n\n    let fps = new FPSviewer({ x: 5, y: 15 }, \"black\");\n    let mariana = new Mariana({ initialPos: { x: 1, y: 490 }, color: \"purple\", speed: 10 });//Mariana\n    let escenario = new Map();\n\n\n    let actors: Array<IActor> = [\n        escenario,\n        fps,\n        mariana,//Mariana \n        new actorEvil({ x: 500, y: 490 }, \"red\", mariana),// malo\n        new actorEvil({ x: 500, y: 490 }, \"blue\", mariana),// malo\n        //new actorEvil({ x: 500, y: 490 }, \"grey\", speed = 0.5, mariana),// malo\n    ];\n    //actors.forEach((a) => a.initialize && a.initialize());//para los sprites\n    //tengo que crear un array de actores evil donde les meto el actor mariana \n    let lastFrame = 0;\n    const render = (time: number) => {\n\n        let delta = (time - lastFrame) / 1000;\n        lastFrame = time;\n        actors.forEach(e => e.update(delta));\n        ctx.clearRect(0, 0, 500, 500);\n        actors.forEach((e) => {\n            e.draw(delta, ctx);\n        });\n\n        window.requestAnimationFrame(render);\n    }\n\n    window.requestAnimationFrame(render);\n\n    document.body.addEventListener(\"keydown\", (e) => {\n        actors.forEach((actor) => { actor.keyboard_event(e.key) });\n    });\n\n    /*document.body.addEventListener(\"keydown\", (e) => {\n        // console.log(e.key);\n        actors.forEach((actor) => {\n            if (actor.keyboard_event_down) {\n                actor.keyboard_event_down(e.key);\n            }\n        });\n    });*/\n\n    document.body.addEventListener(\"keyup\", (e) => {\n        // console.log(e.key);\n        actors.forEach((actor) => {\n            if (actor.keyboard_event_up) {\n                actor.keyboard_event_up(e.key);\n            }\n        });\n    });\n\n}\n"],"names":["$8b4d1930797b255e$export$6503ec6e8aabbaf","$8b4d1930797b255e$export$f7ad0328861e2f03","$8b4d1930797b255e$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$c2f1b17ab47188d2$export$f73d3eb6fd876d80","contructor","origin","this","update","delta","draw","delta1","ctx","keyboard_event","key","$502dbf953f8de01c$export$c2add218418bab48","position","color","super","fps","toFixed","font","fillStyle","fillText","x","y","$f5470880e11d0c0d$export$dfffcd368a0c33a2","initialPos","speed","saltando","altura","newPosX","keyboard_event_up","console","log","key1","fillRect","$5ef15e0738b87499$export$e550015ad0cf97e2","actor","myPos","Math","sqrt","pow","alert","$f29cd6c67ea13581$export$bdfd709ae4826697","$f29cd6c67ea13581$var$bundleURL","$f29cd6c67ea13581$var$getBaseURL","url","replace","value","err","matches","stack","match","$f29cd6c67ea13581$var$getBundleURL","$aff28fc78bd5ac9a$exports","getBundleURL","resolve","$84f0d518b1ccd1d6$export$a5c7b93649eaf8f8","background","Image","src","drawImage","window","onload","document","getElementById","getContext","mariana","actors","lastFrame","render","time","forEach","e","clearRect","requestAnimationFrame","body","addEventListener"],"version":3,"file":"index.e52ac15f.js.map"}